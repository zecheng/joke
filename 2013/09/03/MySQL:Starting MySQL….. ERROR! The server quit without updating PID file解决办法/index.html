<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.ico">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zecheng.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"hide","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1 问题 [root@localhost mysql]# &#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;mysql status">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL:Starting MySQL….. ERROR! The server quit without updating PID file解决办法">
<meta property="og:url" content="https://zecheng.github.io/2013/09/03/MySQL:Starting%20MySQL%E2%80%A6..%20ERROR!%20The%20server%20quit%20without%20updating%20PID%20file%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/index.html">
<meta property="og:site_name" content="泽宬的技术博客">
<meta property="og:description" content="1 问题 [root@localhost mysql]# &#x2F;etc&#x2F;rc.d&#x2F;init.d&#x2F;mysql status">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2013-09-02T16:10:57.000Z">
<meta property="article:modified_time" content="2013-09-02T16:10:57.000Z">
<meta property="article:author" content="泽宬">
<meta property="article:tag" content="MySql">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://zecheng.github.io/2013/09/03/MySQL:Starting%20MySQL%E2%80%A6..%20ERROR!%20The%20server%20quit%20without%20updating%20PID%20file%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MySQL:Starting MySQL….. ERROR! The server quit without updating PID file解决办法 | 泽宬的技术博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">泽宬的技术博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404.html" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://zecheng.github.io/2013/09/03/MySQL:Starting%20MySQL%E2%80%A6..%20ERROR!%20The%20server%20quit%20without%20updating%20PID%20file%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="泽宬">
      <meta itemprop="description" content="路虽遥,行必至.事虽难,做必成.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="泽宬的技术博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL:Starting MySQL….. ERROR! The server quit without updating PID file解决办法
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2013-09-03 00:10:57" itemprop="dateCreated datePublished" datetime="2013-09-03T00:10:57+08:00">2013-09-03</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/MySql/" itemprop="url" rel="index"><span itemprop="name">MySql</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span id="busuanzi_value_page_pv"></span>
            </span><br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>5.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>1 问题</p>
<p>[root@localhost mysql]# /etc/rc.d/init.d/mysql status<span id="more"></span><br>MySQL is not running, but lock file (/var/lock/subsys/mysql[FAILED]<br>[root@localhost mysql]# /etc/rc.d/init.d/mysql start<br>Starting MySQL…The server quit without updating PID file (/usr/local/mysql/data/localhost.localdomain.pid).                              [FAILED]</p>
<p>2 原因</p>
<p>没有初始化权限表</p>
<p>3 解决办法</p>
<p>#cd /usr/local/mysql（进入mysql安装目录）<br>#chown -R mysql.mysql .<br>#su - mysql<br>$cd server<br>$scripts/mysql_install_db</p>
<p>4 本人解决过程</p>
<p>[root@localhost ~]# cd /usr/local/mysql</p>
<p>[root@localhost mysql]# chown -R mysql.mysql .<br>[root@localhost mysql]# su - mysql<br>[mysql@localhost ~]$ cd /usr/local/mysql<br>[mysql@localhost mysql]$ scripts/mysql_install_db<br>Installing MySQL system tables…<br>OK<br>Filling help tables…<br>OK</p>
<p>To start mysqld at boot time you have to copy<br>support-files/mysql.server to the right place for your system</p>
<p>PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !<br>To do so, start the server, then issue the following commands:</p>
<p>./bin/mysqladmin -u root password ‘new-password’<br>./bin/mysqladmin -u root -h localhost.localdomain password ‘new-password’</p>
<p>Alternatively you can run:<br>./bin/mysql_secure_installation</p>
<p>which will also give you the option of removing the test<br>databases and anonymous user created by default.  This is<br>strongly recommended for production servers.</p>
<p>See the manual for more instructions.</p>
<p>You can start the MySQL daemon with:<br>cd . ; ./bin/mysqld_safe &amp;</p>
<p>You can test the MySQL daemon with mysql-test-run.pl<br>cd ./mysql-test ; perl mysql-test-run.pl</p>
<p>Please report any problems with the ./bin/mysqlbug script!</p>
<p>[mysql@localhost mysql]$ /usr/local/mysql/bin/mysqld_safe –user=mysql &amp;<br>[1] 11767<br>[mysql@localhost mysql]$ 120502 07:01:17 mysqld_safe Logging to ‘/usr/local/mysql/data/localhost.localdomain.err’.<br>120502 07:01:17 mysqld_safe Starting mysqld daemon with databases from /usr/local/mysql/data<br>[mysql@localhost mysql]$ /etc/rc.d/init.d/mysql status<br>MySQL running (11830)                                      [  OK  ]<br>[mysql@localhost mysql]$ /etc/rc.d/init.d/mysql start<br>Starting MySQL                                             [  OK  ]</p>
<p>附一文：MySQL: Starting MySQL….. ERROR! The server quit without updating PID file<br>FROM：<a target="_blank" rel="noopener" href="http://icesquare.com/wordpress/mysql-starting-mysql-error-the-server-quit-without-updating-pid-file/">http://icesquare.com/wordpress/mysql-starting-mysql-error-the-server-quit-without-updating-pid-file/</a></p>
<p>This step-by-step guide is mainly for FreeBSD, however the idea is the same for Linux. Every once a while, when I update my FreeBSD box, the system likes to shutdown my MySQL server. Therefore, I need to start it again after the update is done. Unfortunately, the upgrade process is not smooth every time. Sometimes it will throw me some error.</p>
<p>/usr/local/etc/rc.d/mysql.server start<br>Oh well, I got the following error messages:</p>
<p>Starting MySQL….. ERROR! The server quit without updating PID file.<br>Sometimes, the message will tell you the exact location of which PID file:</p>
<p>Starting MySQL….. ERROR! The server quit without updating PID file (/var/db/mysql/<a target="_blank" rel="noopener" href="http://www.icesquare.com.pid/">www.icesquare.com.pid</a>).<br>There are several solutions to troubleshoot these problems. I will go over each one by one.</p>
<p>Solution 1: Reboot The Computer<br>Although it sounds simple, but it really works. During the system upgrade, the OS may disable some of your daemons. Instead of troubleshooting each one by one, the easiest way is to start everything over. For example, I experienced this problem today after upgrading the Apache and Ruby (Yes, MySQL is not part of the update), and I got this error message afterward. After rebooting the computer, the error message is gone.</p>
<p>Solution 2: Remove Your MySQL Config File<br>If you have modified your MySQL configuration file, MySQL may not like it few versions after (MySQL is not backward compatibility friendly). It can be the problem of using an unsupported variable, or something similar. The easiest way is to remove your configuration file, and try to start the MySQL server again:</p>
<p>Backup your MySQL configuration first.</p>
<p>mv /etc/my.cnf /etc/my.cnf.backup<br>And restart the MySQL server again:</p>
<p>/usr/local/share/mysql/mysql.server start<br>Hopefully you will see the following message:</p>
<p>Starting MySQL. SUCCESS!<br>Solution 3: Upgrade Your Database File<br>Sometimes, the newer MySQL doesn’t like the database created in earlier version. I discovered this when I upgrade to MySQL 5.5.7:</p>
<p>Starting MySQL….. ERROR! The server quit without updating PID file (/var/db/mysql/<a target="_blank" rel="noopener" href="http://www.icesquare.com.pid/">www.icesquare.com.pid</a>).<br>Since MySQL tells me which PID file causes the problem, I open the file and take a look what’s going on:</p>
<p>sudo tail /var/db/mysql/<a target="_blank" rel="noopener" href="http://www.icesquare.com.err/">www.icesquare.com.err</a><br>And I saw something interesting: tables: Table ‘mysql.proxies_priv’ doesn’t exist:</p>
<p>101112 10:49:16 InnoDB: Initializing buffer pool, size = 128.0M 101112 10:49:16 InnoDB: Completed initialization of buffer pool 101112 10:49:16 InnoDB: highest supported file format is Barracuda. 101112 10:49:17 InnoDB: 1.1.3 started; log sequence number 1589404 101112 10:49:17 [ERROR] Fatal error: Can’t open and lock privilege tables: Table ‘mysql.proxies_priv’ doesn’t exist 101112 10:49:17 mysqld_safe mysqld from pid file /var/db/mysql/<a target="_blank" rel="noopener" href="http://www.icesquare.com.pid/">www.icesquare.com.pid</a> ended</p>
<p>The reason is very simple. MySQL could not open a table created in the earlier version (&lt; 5.7.7) because it is not compatible with the current version. So, we can try to start the MySQL in safe mode through rc.d. First, you can edit the /etc/rc.conf and put the following into the file:</p>
<p>mysql_enable=”YES” mysql_args=”–skip-grant-tables –skip-networking”<br>Restart MySQL through rc.d:</p>
<p>/usr/local/etc/rc.d/mysql-server start<br>If you did it right, you should see something like the following:</p>
<p>Starting MySQL.. SUCCESS!<br>Now, MySQL is already running the safe-mode. We want to perform a MySQL upgrade on all tables:</p>
<p>sudo mysql_upgrade<br>You should see something like this:</p>
<p>Looking for ‘mysql’ as: mysql Looking for ‘mysqlcheck’ as: mysqlcheck Running ‘mysqlcheck’ with connection arguments: ‘–port=3306’ ‘–socket=/tmp/mysql.sock’ Running ‘mysqlcheck’ with connection arguments: ‘–port=3306’ ‘–socket=/tmp/mysql.sock’ mysql.columns_priv OK mysql.db OK mysql.event OK mysql.func OK mysql.general_log OK mysql.help_category OK mysql.help_keyword OK mysql.help_relation OK mysql.help_topic OK mysql.host OK mysql.ndb_binlog_index OK mysql.plugin OK mysql.proc OK mysql.procs_priv OK mysql.servers OK mysql.slow_log OK mysql.tables_priv OK mysql.time_zone OK mysql.time_zone_leap_second OK mysql.time_zone_name OK mysql.time_zone_transition OK mysql.time_zone_transition_type OK mysql.user OK Running ‘mysql_fix_privilege_tables’… OK<br>Now, we want to switch the MySQL back to normal mode by commenting the extra options in /etc/rc.conf:</p>
<p>mysql_enable=”YES” #mysql_args=”–skip-grant-tables –skip-networking”<br>And restart MySQL through /etc/rc.d:</p>
<p>/usr/local/etc/rc.d/mysql-server restart<br>Now the MySQL is up and running again!</p>
<p>Happy MySQLing.</p>
<p>–Derrick</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/MySql/" rel="tag"># MySql</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2013/09/02/mysql%E8%AE%B0%E5%BD%95/" rel="prev" title="mysql记录">
      <i class="fa fa-chevron-left"></i> mysql记录
    </a></div>
      <div class="post-nav-item">
    <a href="/2013/09/03/linux%E4%B8%8B%E5%BD%BB%E5%BA%95%E5%8D%B8%E8%BD%BDmysql%20%E5%9B%BE%E8%A7%A3%E6%95%99%E7%A8%8B/" rel="next" title="linux下彻底卸载mysql 图解教程">
      linux下彻底卸载mysql 图解教程 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="泽宬"
      src="/images/avatar.gif">
  <p class="site-author-name" itemprop="name">泽宬</p>
  <div class="site-description" itemprop="description">路虽遥,行必至.事虽难,做必成.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">223</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">泽宬</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">817k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">12:23</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
